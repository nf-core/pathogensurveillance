Changes in component 'nf-core/bakta/baktadbdownload'
Changes in 'bakta/baktadbdownload/main.nf':
--- modules/nf-core/bakta/baktadbdownload/main.nf
+++ modules/nf-core/bakta/baktadbdownload/main.nf
@@ -2,9 +2,9 @@
     label 'process_single'
 
     conda "${moduleDir}/environment.yml"
-    container "${ workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ?
-        'https://depot.galaxyproject.org/singularity/bakta:1.10.4--pyhdfd78af_0' :
-        'biocontainers/bakta:1.10.4--pyhdfd78af_0' }"
+    container "${workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container
+        ? 'https://depot.galaxyproject.org/singularity/bakta:1.11.4--pyhdfd78af_0'
+        : 'biocontainers/bakta:1.11.4--pyhdfd78af_0'}"
 
     output:
     path "db*"              , emit: db
@@ -16,16 +16,37 @@
     script:
     def args = task.ext.args ?: ''
     """
-    bakta_db \\
-        download \\
-        $args
+    # TODO: Remove this workaround when bakta adds a proper User-Agent header on next release
+    python3 -c "
+    # Patch requests first
+    import requests
+    _original_request = requests.Session.request
+    def patched_request(self, method, url, **kwargs):
+        headers = kwargs.get('headers', {})
+        if headers is None:
+            headers = {}
+        if 'User-Agent' not in headers:
+            headers['User-Agent'] = 'bakta/1.11.4'
+        kwargs['headers'] = headers
+        return _original_request(self, method, url, **kwargs)
+    requests.Session.request = patched_request
+    
+    # Import and run bakta
+    import sys
+    from bakta.db import main as bakta_main
+    
+    # Set up command line arguments
+    sys.argv = ['bakta_db', 'download'] + '''$args'''.split()
+    
+    # Run it
+    bakta_main()
+    "
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":
         bakta: \$(echo \$(bakta_db --version) 2>&1 | cut -f '2' -d ' ')
     END_VERSIONS
     """
-
     stub:
     def args = task.ext.args ?: ''
     """

Changes in 'bakta/baktadbdownload/environment.yml':
--- modules/nf-core/bakta/baktadbdownload/environment.yml
+++ modules/nf-core/bakta/baktadbdownload/environment.yml
@@ -4,4 +4,4 @@
   - conda-forge
   - bioconda
 dependencies:
-  - bioconda::bakta=1.10.4
+  - bioconda::bakta=1.11.4

'modules/nf-core/bakta/baktadbdownload/meta.yml' is unchanged
'modules/nf-core/bakta/baktadbdownload/tests/tags.yml' was created
'modules/nf-core/bakta/baktadbdownload/tests/nextflow.config' is unchanged
'modules/nf-core/bakta/baktadbdownload/tests/main.nf.test' is unchanged
'modules/nf-core/bakta/baktadbdownload/tests/main.nf.test.snap' is unchanged
************************************************************
